---
import { getCollection } from 'astro:content';
import BaseLayout from '../../../modules/core/layouts/BaseLayout.astro';
import { WorkPage } from '../../../modules/portfolio/components/WorkPage';

export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'zh' } },
  ];
}

const { lang } = Astro.params;

const projects = await getCollection('portfolio', ({ data }) => {
  return data.lang === lang;
});

const sortedProjects = projects.sort((a, b) => a.data.sortOrder - b.data.sortOrder);
---

<BaseLayout title="Work" lang={lang}>
  <div class="container mx-auto px-4 py-12">
    <div className="mb-10 text-center space-y-2">
      <h1 className="text-4xl md:text-5xl font-bold tracking-tight">Work & Projects</h1>
      <p className="text-xl text-muted-foreground max-w-2xl mx-auto">
        Selected works, case studies, and technical experiments.
      </p>
    </div>
    
    <WorkPage client:load projects={sortedProjects} />
  </div>
</BaseLayout>

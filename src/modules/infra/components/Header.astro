---
import { LanguageSwitcher } from './LanguageSwitcher';
import { ThemeToggle } from './ThemeToggle';

interface Props {
  lang?: string;
}

const { lang = 'en' } = Astro.props;
const currentPath = Astro.url.pathname;

import { path } from '@/lib/routing';

const navItems = {
  en: [
    { label: 'Home', href: path(`/${lang}`) },
    { label: 'Garden', href: path(`/${lang}/garden`) },
    { label: 'Work', href: path(`/${lang}/work`) },
    { label: 'About', href: path(`/${lang}/about`) },
  ],
  zh: [
    { label: '首页', href: path(`/${lang}`) },
    { label: '花园', href: path(`/${lang}/garden`) },
    { label: '作品', href: path(`/${lang}/work`) },
    { label: '关于', href: path(`/${lang}/about`) },
  ],
};

const items = navItems[lang as keyof typeof navItems] || navItems.en;
---

<header class="sticky top-0 z-50 w-full border-b bg-background/80 backdrop-blur-sm">
  <div class="container mx-auto px-4 h-16 flex items-center justify-between">
    <a href={`/${lang}`} class="font-bold text-xl tracking-tight hover:opacity-80 transition-opacity">
      My Website
    </a>
    
    <nav class="hidden md:flex items-center gap-6">
      {items.map(item => (
        <a 
          href={item.href} 
          class:list={[
            "text-sm font-medium transition-colors hover:text-primary",
            currentPath === item.href ? "text-primary" : "text-muted-foreground"
          ]}
        >
          {item.label}
        </a>
      ))}
    </nav>

    <div class="flex items-center gap-2">
      <LanguageSwitcher client:load currentLang={lang} currentPath={currentPath} />
      <ThemeToggle client:load />
    </div>
  </div>
</header>
